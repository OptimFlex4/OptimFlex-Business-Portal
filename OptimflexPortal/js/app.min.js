$.root_ = $('body');
//var root = this,
//    throttle_delay = 350,
//    menu_speed = 235,
//    menu_accordion = true;
//var lang = new Lang();
jQuery(document).ready(function () {
    //language
    //lang.dynamic('en', '../files/langpack/en.json');
    //lang.init({
    //    defaultLang: 'mn'
    //    //, currentLang: 'mn'
    //    //, cookie: {
    //    //    name: 'langCookie',
    //    //    expiry: 30,
    //    //    path: '/'
    //    //}
    //    //,allowCookieOverride: true
    //});

    //$("#main_btnHamburger").dxButton({
    //    icon: "fa fa-reorder",
    //    type: "default",
    //    useSubmitBehavior: true,
    //    onClick: function () {
    //        $('html').toggleClass("hidden-menu-mobile-lock");
    //        $('body').toggleClass("hidden-menu");
    //    }
    //});
    var loadPanel = $(".loadpanel").dxLoadPanel({
        shadingColor: "rgba(0,0,0,0.4)",
        position: { of: "login" },
        message: "Уншиж байна ...",
        visible: false,
        showIndicator: true,
        showPane: true,
        shading: true,
        closeOnOutsideClick: false
    }).dxLoadPanel("instance");
    var tmpMenuOptions = {
        showFirstSubmenuMode: "onClick",
        selectionMode: "single",
        selectByClick: true,
        items: [{
            icon: "fa fa-user fa-2x",
            items: [{
                text: "Нууц үг өөрчлөх",
                key:"changePassword"
            }, {
                text: "Гарах",
                key: "logOut"
            }]
        }],
        onItemClick: function (data) {
            //console.log(data);
            console.log(data.itemData.key);
            if (!data.itemData.items) {
                if (data.itemData.key == "logOut") {
                    var logOutDialog = DevExpress.ui.dialog.custom({
                        title: "Системээс гарах",
                        message: "Та системээс гарахдаа итгэлтэй байна уу?",
                        buttons: [
                            { text: "Тийм", onClick: function () { return true } },
                            { text: "Үгүй", onClick: function () { return false } }
                        ]
                    });
                    logOutDialog.show().done(function (dialogResult) {
                        if (dialogResult) {
                            loadPanel.show();
                            globalAjaxVar = $.ajax({
                                type: "POST",
                                url: "../wcf/SMain.svc/LogoutAuth",
                                data: '{}',
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (data) {
                                    var resData = jQuery.parseJSON(data.d);
                                    loadPanel.hide();
                                    if (resData.d.RetType == 0) {
                                        window.location = '../Login';
                                    }
                                    else {
                                        DevExpress.ui.notify({ message: resData.d.RetDesc, type: "error", displayTime: 3000, width: 350 });
                                    }
                                },
                                failure: function (response) {
                                    alert('LOCAL FAILURE');
                                },
                                error: function (xhr, status, error) {
                                    alert('LOCAL ERROR');
                                }
                            });
                        }
                    });
                }
                else if (data.itemData.key == "changePassword") {
                    alert('pass');
                }
            }
            data.element.toggleClass("active");
        },
        onSubmenuHidden: function (data) {
            data.element.removeClass("active");
        },
        width: 80,
        height: 80
    };
    $('#main_btnLogout').dxMenu(tmpMenuOptions);
    //$("#main_btnLogout").dxButton({
    //    icon: "fa fa-sign-out",
    //    type: "default",
    //    useSubmitBehavior: true,
    //    onClick: function () {
    //        alert('aa');
    //    }
    //});
    //$("#main_selectLang").dxSelectBox({
    //    dataSource: [{
    //        "ID": "mn",
    //        "Name": "Монгол"
    //    }, {
    //            "ID": "en",
    //            "Name": "English"
    //        }],
    //    displayExpr: "Name",
    //    valueExpr: "ID",
    //    value: "mn",
    //    fieldTemplate: function (data, container) {
    //        var valID = data.ID;
    //        if (valID == "en") valID = "gb";
    //        var result = $("<div class='custom-item'><img src='img/blank.gif' class='flag flag-" + valID +"' /><div class='lang-name'></div></div>");
    //        result.find(".lang-name").dxTextBox({
    //            value: data.Name,
    //            readOnly: true,
    //            width: "100px"
    //        });
    //        container.html(result);
    //    },
    //    itemTemplate: function (data) {
    //        var valID = data.ID;
    //        if (valID == "en") valID = "gb";
    //        return "<img src='img/blank.gif' class='flag flag-" + valID +"' alt='" + data.Name +"'> " + data.Name+"";
    //    },
    //    onValueChanged: function (e) {
    //        window.lang.change(e.value);
    //    }
    //});
    //$('nav ul').jarvismenu({
    //    accordion: menu_accordion || true,
    //    speed: menu_speed || true,
    //    closedSign: '<em class="fa fa-plus-square-o"></em>',
    //    openedSign: '<em class="fa fa-minus-square-o"></em>'
    //});
    //$('span.menu-item-parent,span.dx-button-text,span.dx-field-item-label-text,div.dx-placeholder,div.dx-datagrid-text-content').attr('lang', $("#main_selectLang").dxSelectBox('instance').option('value'));
});